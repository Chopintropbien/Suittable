@import models.Foursquare.CompactVenue
@import models.Foursquare.Category
@(compactVenues: Seq[CompactVenue], foodCategories: Seq[Category])(implicit message: RequestHeader)

@content = {
  <!-- begin:article -->
  <div class="col-md-9 col-md-push-3">
    <div class="row">
      <div class="col-md-12">
        <div class="heading-title heading-title-alt">
          <h3>Property meeting the search criteria</h3>
        </div>
      </div>
    </div>
    <!-- begin:sorting -->
    <div class="row sort">

      <div class="col-md-4 col-sm-4 col-xs-3">
        <a href="search.html" class="btn btn-warning"><i class="fa fa-th"></i></a>
        <a href="search_list.html" class="btn btn-default"><i class="fa fa-list"></i></a>
        <span>Show <strong>6</strong> of <strong>30</strong> result.</span>
      </div>
      <div class="col-md-8 col-sm-8 col-xs-9">
        <form class="form-inline" role="form">
          <span>Sort by : </span>
          <div class="form-group">
            <label class="sr-only" for="sortby">Sort by : </label>
            <select class="form-control">
              <option>Most Recent</option>
              <option>Price (Low &gt; High)</option>
              <option>Price (High &gt; Low)</option>
              <option>Most Popular (Low &gt; High)</option>
            </select>
          </div>
          <span>Show : </span>
          <div class="form-group">
            <label class="sr-only" for="show">Show : </label>
            <select class="form-control">
              <option>6</option>
              <option>10</option>
              <option>15</option>
              <option>20</option>
              <option>25</option>
              <option>50</option>
              <option>100</option>
            </select>
          </div>
        </form>
      </div>
    </div>
    <!-- end:sorting -->

    <div class="row">
      <div class="col-md-12">
        <div id="map"></div>
      </div>
    </div>

    <!-- begin:product -->
    <div class="container-realestate">

      @for(i <- 0 until compactVenues.length){
        @if(i == 0 || i ==3 || i == 9){
        <div class="row">
          <div class="col-md-12">
            <div class="heading-title heading-title-alt">
              <h3>
                @if(i == 0) {
                  The best choice for you
                }
                @if(i == 3){
                  It can be good
                }
                @if(i == 9){
                  We think the it is not appropriate
                }
              </h3>
            </div>
          </div>
        </div>
        }

        @if(i % 3 == 0){
          <div class="row">
        }
        <div class="col-md-4 col-sm-6 col-xs-12
            @if(i < 3){perfectMatch}
            @if(i >=3 && i < 9){
              middleMatch
            }
            @if(i>=9){doNotMatch}
        ">
          @restaurantMini(compactVenues(i))
        </div>
        @if(i % 3 == 2){
          </div>
        }
      }

    </div>
    <!-- end:product -->

    <!-- begin:pagination -->
    <div class="row">
      <div class="col-md-12">
        <ul class="pagination">
          <li class="disabled"><a href="#">&laquo;</a></li>
          <li class="active"><a href="#">1 <span class="sr-only">(current)</span></a></li>
          <li><a href="#">2</a></li>
          <li><a href="#">3</a></li>
          <li><a href="#">4</a></li>
          <li><a href="#">5</a></li>
          <li><a href="#">&raquo;</a></li>
        </ul>
      </div>
    </div>
    <!-- end:pagination -->
  </div>
  <!-- end:article -->
}



@displayCategories(foodCategories: Seq[Category]) = {
  @for(c <- foodCategories){
    <li>
      <input type="checkbox" name="@c.id" id="@c.id" /> &nbsp;
      <label for="@c.id">@c.shortName</label>
      @defining(c.categories.getOrElse(Seq[Category]())){ categories =>
        @if(!categories.isEmpty) {
          <span id="displayMoreCategories@c.id"> + more</span>
          <ul id="ulMoreCategories@c.id" style="display: none;">
            @displayCategories(categories)
          </ul>
          <script>
            displayCategory("@c.id");
          </script>
        }
      }
    </li>
  }
}

@sidebar = {

<!-- begin:sidebar -->
<div class="col-md-3 col-md-pull-9 sidebar">
  <div class="widget widget-sidebar widget-white">


    <div class="widget-header">
      <h3>Distance</h3>
    </div>
    <ul>
      <li>
        <input type="radio" name="distance" value="500" id="500" /> &nbsp;
        <label for="500"> By foot </label>&nbsp; (~ 500m)
      </li>
      <li>
        <input type="radio" name="distance" value="2000" id="2000" /> &nbsp;
        <label for="2000"> By bike </label>&nbsp; (~ 2km)
      </li>
      <li>
        <input type="radio" name="distance" value="5000" id="5000" /> &nbsp;
        <label for="5000"> By car </label>&nbsp; (~ 5km)
      </li>
    </ul>
  </div>



  <!-- break -->
  <div class="widget widget-sidebar widget-white">
    <div class="widget-header">
      <h3>Categories</h3>
    </div>
    <ul class="list-check">
      @displayCategories(foodCategories)
    </ul>
  </div>
  <!-- break -->
  <div class="widget widget-sidebar widget-white">
    <div class="widget-header">
      <h3>Top Agents</h3>
    </div>
    <ul>
      <li><a href="#">John Doe</a></li>
      <li><a href="#">Christoper Drew</a></li>
      <li><a href="#">Jane Doe</a></li>
      <li><a href="#">Jeny</a></li>
    </ul>
  </div>
  <!-- break -->
</div>
<!-- end:sidebar -->

}

@css = {
  <link href="@routes.Assets.versioned("stylesheets/search/search.css")" rel="stylesheet">
}

@js = {
<script src="@routes.Assets.versioned("javascripts/search/displayCategories.js")"></script>

<script>
function initMap() {
  var myLatLng = {lat: -25.363, lng: 131.044};

  // Create a map object and specify the DOM element for display.
  var map = new google.maps.Map(document.getElementById('map'), {
    center: myLatLng,
    scrollwheel: false,
    zoom: 4
  });

  // Create a marker and set its position.
  var marker = new google.maps.Marker({
    map: map,
    position: myLatLng,
    title: 'Hello World!'
  });
}

</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDszbsFk8vTYwLZ3vP68BdkGhmFx-CcNV4&callback=initMap" async defer></script>
}



@template.template(content, sidebar, css, js)(null)(message)